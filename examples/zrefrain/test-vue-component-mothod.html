<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Vue.js markdown editor example</title>
    <!-- Delete ".min" for console warnings in development -->
    <script src="https://unpkg.com/lodash@4.16.0"></script>
    <script src="https://unpkg.com/marked@0.3.6"></script>
    <script src="../../dist/vue.js"></script>
  </head>
  <body>

    <div id="editor">
      <textarea :value="input" @input="update"></textarea>
      <div v-html="compiledMarkdown"></div>
    </div>

    <script>
      var vm = new Vue({
        el: '#editor',
        props: {
          check: {
            type: Boolean,
            default: false
          }
        },
        data: {
          input: '# hello',
          checks: ''  // 好像是用来确认 vm._data 是否会同步属性（忘了，但记得是没什么意义的，先留着）
        },
        computed: {
          compiledMarkdown: function () {
            return marked(this.input, { sanitize: true })
          }
        },
        methods: {
          update: _.debounce(function (e) {
            this.input = e.target.value
          }, 300)
        },
        /**
         * template、render 存在会替换掉 el: '#editor' 元素，render 优先级比 template 更高
         * 参考资料：https://cn.vuejs.org/v2/api/#%E9%80%89%E9%A1%B9-DOM
         */
        // template: `<ul><li>{{input}}</li></ul>`,
        // render: function(createElement) {
        //   return createElement('ul', [
        //     createElement('li', this.input),
        //     createElement('li', this.input)
        //   ])
        // }
      })

      console.log('example---- vm', vm)

      // 上面的内容不重要，是赋值其他 example 文件，用来执行 new Vue 观察流程用的
      Vue.component('anchored-heading', {
        render: function (createElement) {
          return createElement(
            'h' + this.level,   // 标签名称
            this.$slots.default // 子元素数组
          )
        },
        props: {
          level: {
            type: Number,
            required: true
          }
        }
      })

      // achored-heading 组件确实会出现在其中
      console.log('example---- Vue.options.components', Vue.options.components)
    </script>

  </body>
</html>
